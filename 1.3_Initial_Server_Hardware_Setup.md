# 1.3. 초기 서버 하드웨어 및 그린 컴퓨팅 세팅 (Hardware & Green Computing)

**문서 버전:** 2.0 (Earth AI Strategy Aligned)
**최종 업데이트:** 2025년 12월 8일
**핵심 목표:** **'재생 하드웨어(Refurbished HW)'**와 **'전력 최적화(Power Tuning)'**를 통해 탄소 발자국을 최소화한 고성능 AI 인프라 구축.

---

## 1. 하드웨어 선정 및 구매 (Procurement)

### 1.1. 메인 서버: Dell PowerEdge R730xd (The Workhorse)
*   **선정 이유:**
    *   **가성비:** DDR4 메모리를 쓰면서도 가격이 바닥을 침 (이베이/중고장터 기준 50~80만 원).
    *   **확장성:** 3.5인치 HDD 베이 12개 + 2.5인치 후면 베이 2개 = 스토리지 서버 겸용 가능.
    *   **GPU:** 라이저 카드를 통해 싱글 슬롯 GPU 장착 가능 (향후 AI 추론용).
*   **상세 스펙 (권장):**
    *   **CPU:** Intel Xeon E5-2680 v4 x 2ea (총 28코어 56스레드). 가성비/전성비 최적.
    *   **RAM:** DDR4 ECC 128GB (16GB x 8). 가상화 운영을 위해 넉넉히.
    *   **Raid Controller:** **H730P Mini (HBA 모드)**. *중요: ZFS 사용을 위해 반드시 IT Mode(Non-RAID)로 설정.*

### 1.2. 스토리지 (Storage) - Data Lake
*   **OS/VM용:** 삼성 엔터프라이즈 SSD (PM863 등) 480GB x 2 (ZFS Mirror) - 후면 베이 장착.
*   **데이터 저장용:** 
    *   초기: 10TB~14TB SATA HDD (WD Ultrastar / Seagate Exos 중고/리퍼).
    *   구성: RaidZ2 (RAID 6와 유사, 하드 2개 고장나도 데이터 보존).

### 1.3. 네트워크 (Network)
*   **스위치:** MikroTik CRS305-1G-4S+IN (10G SFP+ 4포트). 내부망 10G 구성 필수.
*   **NIC:** Intel X520-DA2 (10G 랜카드). 서버마다 장착.

---

## 2. 그린 컴퓨팅 튜닝 (Green Optimization)

### 2.1. BIOS 전력 설정 (Power Efficiency)
서버를 켜자마자 가장 먼저 해야 할 일입니다. 전기료를 20% 이상 아낄 수 있습니다.
*   **System Profile:** `Performance Per Watt (OS)` 또는 `Custom`.
*   **C-States:** `Enabled` (유휴 상태일 때 CPU 코어를 잠재움).
*   **Fan Speed Offset:** `Low` (소음 및 전력 감소).

### 2.2. 가상화 OS 설치: Proxmox VE 8.x
*   **선정 이유:** 무료(Open Source), ZFS 네이티브 지원, 컨테이너(LXC) 지원으로 가벼움.
*   **설치 설정:**
    *   파일 시스템: **ZFS (RAID 1 Mirror)** for Boot Drive.
    *   스왑(Swap): SSD 수명 연장을 위해 최소화(vm.swappiness=10).

### 2.3. AI 워크로드 격리 (GPU Passthrough)
*   향후 GPU 장착 시, Proxmox의 'PCIe Passthrough' 기능을 통해 VM이 GPU를 직접 제어하게 설정.
*   IOMMU 그룹 활성화 (`intel_iommu=on` 커널 파라미터 추가).

---

## 3. 구축 절차 (Step-by-Step)
1.  **입고 검수:** 서버 뚜껑 열고 먼지 제거(에어 콤프레셔), 서멀 구리스 재도포 (필수).
2.  **펌웨어 업데이트:** iDRAC를 통해 BIOS, Network, Raid Controller 펌웨어를 최신으로 업데이트.
3.  **OS 설치:** USB로 Proxmox VE 설치.
4.  **네트워크 본딩:** LACP (802.3ad) 설정으로 대역폭 확보 및 회선 이중화.
5.  **스트레스 테스트:** `stress-ng` 등으로 24시간 풀로드 테스트하여 불량 부품 색출.
