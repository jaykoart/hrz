# Phase 1.3: 초기 서버 하드웨어 및 OS 설치

**문서 최종 수정일:** 2025년 11월 29일

## 1. 개요

구매한 서버 하드웨어를 물리적으로 설치하고, 가상화 환경을 운영하기 위한 기반 운영체제(OS)인 Proxmox VE(Virtual Environment)를 설치 및 구성하는 단계입니다. 모든 과정은 2대의 서버에 동일하게 적용합니다.

## 2. 필요 장비 및 준비물

- **서버:** Dell PowerEdge R730xd (2대)
- **스토리지:**
    - VM 운영용 SSD: Samsung PM893 1.92TB (4개)
    - 데이터 저장용 HDD: Seagate Exos 16TB (4개)
- **서버 랙 관련:**
    - 서버 구매 시 포함된 랙 레일킷(Rail Kit) (2세트)
    - 15U 허브랙
- **기타:**
    - 십자드라이버
    - CAT.6 랜 케이블 (4개 이상)
    - 16GB 이상의 USB 메모리 (Proxmox 설치용)

## 3. 서버 랙 마운트 및 케이블 연결

### 3.1. 랙 마운트
1.  15U 허브랙의 전면과 후면 기둥에 Dell 서버용 레일킷을 설명서에 따라 정확히 장착합니다. (보통 도구 없이 장착 가능)
2.  랙의 공간 배분을 고려하여 2대의 서버를 각각 다른 칸에 설치합니다. (예: 2번, 5번 칸)
3.  서버를 레일킷 홈에 맞춰 끝까지 밀어 넣어 '딸깍' 소리가 나며 고정될 때까지 장착합니다.

### 3.2. 케이블 연결
1.  **전원 연결:** 각 서버의 이중화된 파워 서플라이(PSU) 2개 모두를 **PDU(전원 분배 장치)**의 다른 포트에 연결합니다. (총 4개의 PDU 포트 사용)
2.  **주 네트워크 연결:** 각 서버의 내장 1GbE LAN 포트(보통 1번 포트)를 **Mikrotik 스위치**에 랜선으로 연결합니다.
3.  **iDRAC 원격 관리 연결:** 각 서버의 iDRAC 전용 포트(렌치 모양 아이콘)를 **Mikrotik 스위치**의 다른 포트에 랜선으로 연결합니다. 이를 통해 서버를 켜고 끄거나 OS 설치 과정을 원격으로 모니터링할 수 있습니다.

## 4. 스토리지 장착 및 RAID 구성

### 4.1. 디스크 물리적 장착
- 각 서버의 전면 드라이브 베이를 엽니다.
- **서버 1, 서버 2 공통:**
    - 0번, 1번 베이에 **Samsung PM893 1.92TB SSD**를 장착합니다.
    - 2번, 3번 베이에 **Seagate Exos 16TB HDD**를 장착합니다.

### 4.2. RAID 컨트롤러 설정 (PERC H730P)
1.  서버의 전원을 켜고, 부팅 화면에서 **F2 키**를 연타하여 'System Setup' 메뉴로 진입합니다.
2.  `Device Settings` 메뉴로 이동하여 `Integrated RAID Controller 1: Dell PERC H730P Mini`를 선택합니다.
3.  `Configuration Management` → `Create Virtual Disk`를 선택합니다.
4.  **가상 디스크 1 생성 (OS 및 VM용):**
    - `Select RAID Level`: **RAID 1**을 선택합니다.
    - `Select Physical Disks`: 목록에서 `Solid State Drive` 2개를 찾아 체크합니다.
    - `Virtual Disk Name`: `OS_SSD_RAID1` 로 입력합니다.
    - 하단의 `Create Virtual Disk` 버튼을 클릭하여 생성을 완료합니다.
5.  **가상 디스크 2 생성 (데이터 저장용):**
    - 다시 `Create Virtual Disk` 메뉴로 진입합니다.
    - `Select RAID Level`: **RAID 1**을 선택합니다.
    - `Select Physical Disks`: 목록에서 `Hard Drive` 2개를 찾아 체크합니다.
    - `Virtual Disk Name`: `DATA_HDD_RAID1` 로 입력합니다.
    - `Create Virtual Disk` 버튼을 클릭하여 생성을 완료합니다.
6.  모든 설정이 완료되면 ESC 키를 눌러 메인 화면으로 나온 뒤 서버를 재부팅합니다.

## 5. Proxmox VE (Virtual Environment) 설치

### 5.1. 설치 USB 제작
1.  PC에서 Proxmox VE 공식 홈페이지([https://www.proxmox.com/en/downloads](https://www.proxmox.com/en/downloads))에 접속하여 최신 버전의 ISO 파일을 다운로드합니다. (예: Proxmox VE 8.2 ISO Installer)
2.  'BalenaEtcher' 또는 'Rufus' 프로그램을 다운로드하여 실행합니다.
3.  다운로드한 Proxmox VE ISO 파일과 USB 메모리를 선택하고, '굽기(Flash)'를 시작하여 설치용 USB를 제작합니다.

### 5.2. OS 설치 과정
1.  제작한 USB를 서버에 꽂고 부팅합니다. 부팅 중 **F11 키**를 연타하여 'Boot Manager'로 진입합니다.
2.  부팅 옵션에서 `One-shot UEFI Boot Menu` -> `Front USB` 또는 해당 USB 장치를 선택합니다.
3.  Proxmox VE 설치 화면이 나타나면 `Install Proxmox VE`를 선택하고 Enter를 누릅니다.
4.  **EULA:** `I agree`를 클릭합니다.
5.  **Target Harddisk:** RAID 구성으로 생성된 디스크 중, 용량이 작은 `OS_SSD_RAID1` (약 1.7TB)을 선택합니다.
6.  **Location and Time Zone:** `Country`는 `South Korea`, `Time zone`은 `Asia/Seoul`, `Keyboard Layout`은 `U.S. English`로 자동 설정된 것을 확인하고 `Next`를 클릭합니다.
7.  **Administration Password and Email Address:** Proxmox VE 웹 관리자(root) 계정의 비밀번호를 입력하고, 관리자 알림을 받을 이메일 주소를 입력합니다.
8.  **Management Network Configuration:**
    - `Management Interface`: 주 네트워크로 연결된 네트워크 카드 이름(예: eno1)을 선택합니다.
    - `Hostname (FQDN)`: 서버의 전체 주소. `node1.ikscloud.local` 과 같이 정합니다. (두 번째 서버는 `node2.ikscloud.local`)
    - `IP Address (CIDR)`: 할당받은 고정 IP 주소와 서브넷을 입력합니다. (예: `211.100.20.10/24`)
    - `Gateway`: KT에서 제공한 게이트웨이 주소를 입력합니다. (예: `211.100.20.1`)
    - `DNS Server`: `168.126.63.1` (KT DNS) 또는 `8.8.8.8` (Google DNS)을 입력합니다.
9.  **Summary:** 설정된 내용을 최종 확인하고 `Install` 버튼을 클릭합니다.
10. 설치가 완료되면 USB를 제거하고 서버가 자동으로 재부팅됩니다.

## 6. 설치 후 기본 설정

1.  **웹 인터페이스 접속:**
    - 다른 PC의 웹 브라우저 주소창에 `https://<설치 시 입력한 IP 주소>:8006` 을 입력합니다.
    - '연결이 비공개로 설정되어 있지 않습니다' 경고가 뜨면, '고급' -> '안전하지 않은 사이트로 이동'을 클릭합니다.
    - 사용자 이름은 `root`, 비밀번호는 설치 시 설정한 암호를 입력하여 로그인합니다.
2.  **엔터프라이즈 리포지토리 비활성화:**
    - 좌측 트리에서 노드(`node1`)를 선택하고, `업데이트` -> `리포지토리` 메뉴로 이동.
    - `pve-enterprise.list`를 선택하고 `비활성화` 버튼을 클릭.
3.  **커뮤니티 리포지토리 추가:**
    - `추가` 버튼 클릭 -> `No-Subscription` 리포지토리를 추가.
    - 셸(Shell)을 열고 `apt update && apt dist-upgrade -y` 명령으로 시스템을 최신 상태로 업데이트.

---
## 7. 다음 단계
- `[1.4_Hybrid_Cloud_Integration.md](1.4_Hybrid_Cloud_Integration.md)` 로 이동하여 설치된 Proxmox 서버와 AWS 간의 하이브리드 클라우드 환경을 구축합니다.
